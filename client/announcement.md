## 公告栏配置

!> 安全风险说明：在正式环境中一定要使用https协议来显示公告，因为在公告文件中可以调用Nodejs API，否则一旦发生网络拦截会导致电脑中病毒木马。如果不能承受这个风险请关闭公告栏功能

启用公告栏的方法很简单，在客户端配置文件里，把`api`选项后面的值复制到`announcement_api`后面，然后把`index.php`或者`index.yml`改成`anno.html`，就像下面这样：

```yaml
announcement_api: http://127.0.0.1/anno.html
```

### 搭建公告API

下面是针对小白的搭建方法，当然你也可以选择搭建自己的API

<!-- tabs:start -->

#### **单文件服务端**

在单文件服务端的目录下创建一个文件`anno.html`，然后打开文件写上一些公告信息，然后保存关闭即可

#### **静态服务端**

在静态服务端的`index.json`文件旁创建一个文件`anno.html`，然后打开文件写上一些公告信息，然后保存关闭即可

#### **PHP服务端**

在网站根目录下创建一个文件`anno.html`，然后打开文件写上一些公告信息，然后保存关闭即可

<!-- tabs:end -->

### 调用系统浏览器

如果需要在公告栏中调用系统浏览器的话，不要使用a标签，而是使用js api：来实现`updaterApi.execute('start https://mcbbs.com')`

### 换行和乱码问题

如果遇到乱码的问题，请尝试用UTF-8保存公告文件

如果遇到换行失效的问题，请在公告文件内，使用`<pre></pre>`包裹公告内容，比如这样

```html
<pre>
【升级】12月14日负载均衡SLB升级通知

升级窗口：北京时间2021年12月14日 00:30 - 07:00
升级内容：华北2（北京）、华东1（杭州）、华北1（青岛）地域部分负载均衡SLB升级。
升级影响：升级期间部分负载均衡SLB 公网访问会有2~4次闪断(1秒内)，客户端重连可恢复，请在客户端中做好重连重试机制。受影响实例详见您的站内信和邮件，如果未收到升级短信/站内信/邮件则不受影响。

给您带来的不便敬请谅解，有任何问题，可点击联系我们进行咨询反馈
</pre>
```



