## 单文件服务端

在使用单文件服务端，请确保你熟悉以下内容，否则得不到任何技术支持：

1. 基本YAML语法
2. 基本JSON语法
3. 基本计算机网络知识：IP、端口、域名、端口映射等
4. 超文本传输协议中常见的错误代码

单文件服务端环境要求：Java 8或者以上版本

首先下载服务端zip包，将`单文件服务端`解压出来

如果你要更新模组文件：复制Minecraft客户端中所有的模组文件到`res/.minecraft/mods/`里（目录请自行创建），注意是所有文件

如果你要更新其它文件，同样按上面的方法，复制到`res`目录里对应的路径的目录上（比如vexview的贴图复制到`res/.minecraft/vexview/textures/`下，其它文件同理）

编辑服务端配置文件`config.yml`，在`common_mode`下写上所有要进行更新的目录的路径，比如要更新模组文件和vexview的贴图文件可以这样写

```yaml
# 路径分隔符只能使用正斜线，如果用反斜线出了问题请自行解决！
# 请避免在更新规则中包含[]方括号，会导致更新失败
common_mode:
  - .minecraft/mods/*.jar
  - .minecraft/vexview/textures/**
```

如果需要，你可以也修改监听端口（完整的配置参考和示例可以[点击这里](reference.md)）

```yaml
# 监听端口，如果冲突了请换一个别的端口
port: 8850

# 监听地址，高级参数，请勿随意修改
# address: 0.0.0.0
```

完成后双击`启动.cmd`启动服务端（如果修改了`config.yml`记得重启一下，如果是添加删除`res`里的文件则不用重启），如果你看到了`启动成功！`的字样，说明启动成功

然后需要验证服务端是否能正常访问（请不要跳过这一步），步骤很简单：使用浏览器打开黑框里显示的API地址，如果浏览器显示了一大串`json`格式的英文。那么恭喜，服务端配置无误！否则请检查你的网络环境是否通畅

到这里，单文件服务端就安装完成了

注意所有参与更新文件的文件名中请不要包含下列字符，否则出现**服务端返回无法解码的数据**的错误请自己想办法：

[forbidden-chars.md](forbidden-chars.md ':include')

---

[for-xmcl.md](for-xmcl.md ':include')

## 后续维护

得益于软件的同步式更新架构，后续的客户端维护其实是非常简单的：

+ 给客户端新增文件：在服务端**添加**对应的文件，客户端那边下次启动时，就会同步更新（即时生效）
+ 删除客户端的文件：在服务端**删除**对应的文件，客户端那边下次启动时，就会同步更新（即时生效）
+ 更新客户端的文件：在服务端**替换**对应的文件，客户端那边下次启动时，就会同步更新（即时生效）

不仅仅是文件，文件夹也是和上面一样的更新逻辑。这样，服务端的内容，就会自动同步到客户端那边。如果没有按预期更新，请检查一下对应的文件/目录是否忘了添加更新规则