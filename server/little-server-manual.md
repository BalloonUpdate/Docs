## 单文件服务端Manual

单文件服务端是一种开箱即用的更新助手服务端，使用起来最简单。编写语言为大名鼎鼎的Jvav语言，没有任何外部依赖，可以在任何JVM平台上运行，版本最低需要Java8。适合小服务器和调试环境使用。

最新版的单文件服务端已经可以模拟静态服务端工作了（需开启高性能模式），可以极大减小CPU的计算压力。如果你的服务器规模比较大，同时res目录也比较大，推荐开启高性能模式。

## 使用教程

1. 首先下载服务端zip包，将`单文件服务端`解压到任意位置（建议使用纯英文路径）
2. 如果你要更新模组文件，复制Minecraft客户端中所有的模组文件到`res/.minecraft/mods/`里（目录请自行创建），注意是所有文件。如果你要更新其它文件，同样按上面的方法，复制到`res`目录里对应的路径的目录上（比如vexview的贴图复制到`res/.minecraft/vexview/textures/`下，其它文件同理）
3. 编辑配置文件`config.yml`，在`common_mode`下写上所有要进行更新的目录的路径，比如要更新模组文件和vexview的贴图文件可以这样写。需要注意的是，路径分隔符只能使用正斜线（即使是在Windows上），且避免在更新规则中包含`[]`方括号，会导致更新失败

```yaml
common_mode:
  - .minecraft/mods/*.jar
  - .minecraft/vexview/textures/**
```

4. 其它参数无需改动，保持默认即可，保存并关闭配置文件`config.yml`（如果对`config.yml`进行了修改需要重启程序，注意是重启）
5. 双击`启动.cmd`启动服务端，如果你看到了`启动成功！`的字样，说明启动成功。如果失败请换个端口再试试
6. 复制程序输出的`API地址`后面的链接，到浏览器粘贴并打开，如果显示大串`json`格式的英文（不是json格式就是有问题），那么恭喜，服务端配置无误！
7. 若你有外网IP或者域名，请将链接中的`0.0.0.0`替换为对应的外网IP域名再访问一次，再次确认无误后，安装过程就结束了。

## 注意事项

注意所有参与更新文件的文件名中请不要包含下列字符，否则会导致更新出错：半角感叹号`!`、波浪号`~`、反引号、星号`*`、Et（And）`&`、Caret`^`、百分号`$`、At`@`、半角冒号`:`、半角分号`;`、半角双引号`"`、反斜线`\`

## 文件管理

得益于软件的同步式更新架构，后续对客户端的文件管理其实是非常简单的：

+ 给客户端新增文件：在服务端**添加**对应的文件，客户端那边下次启动时，就会同步更新（未开启高性能模式时可以即时生效）
+ 删除客户端的文件：在服务端**删除**对应的文件，客户端那边下次启动时，就会同步更新（未开启高性能模式时可以即时生效）
+ 更新客户端的文件：在服务端**替换**对应的文件，客户端那边下次启动时，就会同步更新（未开启高性能模式时可以即时生效）

不仅仅是文件，文件夹也是和上面一样的更新逻辑。这样，服务端的内容，就会自动同步到客户端那边。如果没有按预期更新，请检查一下对应的文件/目录是否忘了添加更新规则