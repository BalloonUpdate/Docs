## 客户端安装教程

!> 在进行客户端程序的安装之前，务必将原有的客户端完整备份一次，以防配置出错误删文件！！！

1. 下载并解压客户端zip包，把主程序和配置文件一起解压到`.minecraft/updater`目录下（需要手动创建`updater/`目录）

![client-inside-updater](客户端安装教程.assets/client-inside-updater.png)

2. 打开并配置`updater.yml`（参考[客户端配置文件](#配置文件)）
3. 如果你喜欢，可以把客户端程序，移动到启动器旁边，并且可以改成别的文件名（比如：`点击更新mods.exe`等等），但是，客户端程序只有放在以下路径才能正常工作：`.minecraft`同级目录(启动器旁)、`.minecraft/`下，`.minecraft/updater/`下

![out_mcdir](客户端安装教程.assets/out_mcdir.png)

5. 配置完毕，启动测试吧

---

 如果你的启动器支持**启动前指令**（如HMCL），可以参考[配置一键启动](#配置一键启动)，配置一键启动！可以在**启动游戏之前更新文件**，游玩体验大幅提升

### 配置文件

配置文件非常简单，因为除了`api`以外，其它都是可选项，均可以省略。

```yaml
# 更新服务器的地址，支持子目录，
# 末尾必须明确地以某个文件结尾，比如index.php, index.yml
# 如果只写域名或者ip的话会报错，比如这样： http://mydomain.domain/
# 结尾一般是：index.php 或者 index.yml
# php服务端例子：api: http://127.0.0.1:7750/index.php
# 静态服务端例子：api: https://test-123456.cos.ap-nanjing.myqcloud.com/index.yml
# 单文件服务端例子：api: http://127.0.0.1:8850/index.yml
# 单文件服务端会在启动成功后自动输出API地址，通常情况可以直接复制使用
api: http://127.0.0.1:7750/index.php


# 界面/窗口的宽度
window_width: 380

# 界面/窗口的高度
window_height: 130
```

完整配置文件参考，不建议直接复制！（仅供参考之用途）
<details>
<summary auto>点击</summary>

```yaml
# 更新服务器的地址，支持子目录，
# 末尾必须明确地以某个文件结尾，比如index.php, index.yml
# 如果只写域名或者ip的话会报错，比如这样： http://mydomain.domain/
# 结尾一般是：index.php 或者 index.yml
# php服务端例子：api: http://127.0.0.1:7750/index.php
# 静态服务端例子：api: https://test-123456.cos.ap-nanjing.myqcloud.com/index.yml
# 单文件服务端例子：api: http://127.0.0.1:8850/index.yml
# 单文件服务端会在启动成功后自动输出API地址，通常情况可以直接复制使用
api: http://127.0.0.1:7750/index.php

# 自定义界面的加载路径，一般是一个相对地址（起始路径: .minecraft/updater）
# 此项必须要指向一个.html文件，比如: assets: 'custom-ui/index.html'
assets: custom-ui/index.html

# 自定义图标文件，，一般是一个相对地址（起始路径: .minecraft/updater）
# 支持png和ico格式，比如: assets: 'custom-ui/icon.p'
icon: custom-ui/icon.png

# 是否自动打开devtools（通常做自定义界面会用到）
# 手动打开方式：Ctrl+Shift+I
dev_tools: true

# 界面/窗口的宽度
window_width: 380

# 界面/窗口的高度
window_height: 130

# 更新完成后，软件退出之前执行的指令
# 可以用来打开启动器等
# 高阶的用法请参考Windows的cmd命令
# 如果需要异步启动程序，可以不用start启动
# 而是在此配置项的最前面加一个+号，代表不阻塞执行
postcalled_command: start https://www.mcbbs.net

# 报错时（网络问题、配置文件等问题出现时），屏幕上显示的自定义错误信息
# 可引导玩家前往官网或者加群
error_message: '是否需要打开服务器官网下载完整客户端?'

# 报错时，当点击屏幕上显示的自定义错误信息下面 确定按钮 后，执行的指令
# 可直接打开某个链接或者执行某个程序
# 只有当error_message存在时error_help才有效
error_help: start https://www.mcbbs.net

# 设置了更新完毕后，窗口延迟多少ms退出
visible_time:  1500

# 文件更新完毕后是否是否不自动退出（需要手动点叉）
# 在开发/调试界面时非常有用。
hold_ui: true

# 前端Cookies持久化保存，会保存到这个文件名里
# 如果要做接入其它网站登录的话，保存Cookies是个很有用的功能
# 就可以实现三方网站记住账号和密码了
persistent_cookies: cookies.yml

# ip打码，开启后，所有弹框中的ip域名部分，会使用星号*代替
# 防止更新服务端地址显示在提示框中泄露
# 注：日志中的ip域名不受此影响
ip_mask: true
```

</details>

### 配置一键启动

一键启动的效果：点击启动游戏按钮，自动弹出更新，更新完毕后，接着自动启动minecraft，玩家只需要点击启动就好了，不需要进行任何其它额外操作。

#### 其它启动器

如果你的启动器支持`启动前指令`，请在启动前指令填写命令行`updater-3.x.x.exe -s -u`（不要忘记`-s -u`这两个参数，如果有黑框显示，可以尝试去掉`-s`参数，只留下`-u`参数）

如果你的启动器不支持，请考虑使用`postcalled_command`选项，在更新完毕后，由updater来打开启动器

#### HMCL

具体步骤：

0. 将`updater-3.x.x.exe`放到`.minecraft/updater/`下

1. 启动HMCL，打开**（全局）游戏设置**界面，找到**启动前指令**（不是前置指令）这一项，填写`.minecraft/updater/updater-3.x.x.exe -s -u`，或者其它对应的路径（如果不在这里的话，但请不要忘记`-s -u`这两个参数）

2. 最后启动游戏测试效果

3. 注：请将`updater-3.x.x.exe`换成实际的文件版本号

#### PCL2

如果你使用PCL2，可以使用自定义界面的功能，在右侧增加一个"点击更新"的按钮，点击后，手动更新文件