# 服务端配置

配置文件决定了updater如何按你的想法来进行工作。这是一个栗子，用来更新客户端所有模组文件

```json
{
    "mode": "common",
    "paths": [
        ".minecraft/mods"
    ]
}
```

`mode`选项表明了**工作模式**，目前支持`common`和`exist`，一般建议使用`common`模式

`paths`选项表明了哪些目录需要更新，可以写多个目录，这里既可以指向一个目录，也可以精准指向单个文件

## 工作模式

- **common模式下**：路径匹配的文件会被**更新**，没有匹配的不会进行任何操作
- **exist模式下**：路径匹配的文件会被**删除**，没有匹配会**正常地**进行更新

`common`是一个通用的模式，只有在`paths`中列出文件会被更新，适合大多数场景

`exist`是一个特殊的模式，**只会更新存在于服务端的全部文件**，其它文件不会进行任何操作，除非是路径**被匹配时**，文件会被删除！

服务端配置文件到这里就配置完毕了！如果需要使用正则写法，请往下阅读，也可以看看[服务端配置文件示例](服务端配置文件示例.md)

> 写给老用户：在2.8之前，默认是正则写法，加@是纯文本写法（普通写法），但从2.8开始，**这两种写法互换了意思**，请注意区分！

## 正则表达式写法

除了使用上面栗子里的普通写法以外，还可以使用正则写法更精准地控制文件更新，比如实现通配符或者排除指定文件/目录等

只需要在路径最前面加上一个`@`符号就好了，加上`@`符号表明这是一条正则表达式，而不是普通路径

下面是一个栗子，它只会更新mods下的所有.jar文件，同时会忽略非.jar结尾文件（这些文件通常是某个模组的依赖库，并不需要参与到更新当中）

```json
[
	"@\\.minecraft/mods/[^/]+\\.jar"
]
```

如果你喜欢的话，正则写法也可以和普通写法混合使用

```json
[
	"@\\.minecraft/mods/[^/]+\\.jar",
    ".minecraft/saves"
]
```

但是使用正则表达式写法有些地方需要注意：

1. 请注意反斜杠`\`的转义问题（如果使用Vscode，语法错误会有红色高亮）
3. 请注意半角点`.` 的转义和正则本身的一些转义字符的影响
4. 路径分隔符统一用正斜线`/`表示。目录路径开头和末尾均没有`/`