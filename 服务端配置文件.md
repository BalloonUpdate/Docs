## 服务端配置

服务端配置文件指：`index.yml`

在配置文件里设置更新路径，比如哪些文件参与更新，哪些文件不参与。

这是一个栗子，更新所有模组文件

```yaml
mode: common
paths:
  - .minecraft/mods
```

`mode`：updater的工作模式，仅支持`common`和`exist`，建议使用`common`模式

`paths`：参与更新的目录，支持多行，既可以指向一个目录，也可以精准指向单个文件（更新单个文件）

服务端配置文件到这里就配置完毕了！如果需要特殊的高级用法，请往下阅读，也可以看看[配置文件示例](服务端配置文件示例.md)

### 高级用法

#### 工作模式

- **common**模式下：路径匹配的文件会被**更新**，没有匹配的不会进行任何操作
- **exist**模式下：路径匹配的文件会被直接**删除**，没有匹配会**正常地**进行更新

`common`是一个通用的模式，只有在`paths`中列出文件会被更新，适合大多数场景

`exist`是一个特殊的模式，**只会更新存在于服务端的全部文件**，其它文件不会进行任何操作，除非是路径**被匹配时**，文件会被删除！

#### 正则表达式匹配

除了使用普通写法以外，还可以使用正则写法更精准地控制文件更新，比如实现通配符或者排除指定文件/目录。

只需要在路径最前面加上一个`@`符号就好了，加上`@`符号表明这是一条正则表达式，而不是普通路径

下面是一个栗子，它只更新mods下的所有.jar文件（非.jar结尾的文件通常是某个模组的依赖库，并不需要参与到更新当中）

```yaml
mode: common
paths:
  - '@\.minecraft/mods/[^/]+\.jar'
```

如果你喜欢，正则写法也可以和普通写法混合使用

```yaml
mode: common
paths:
  - '@\.minecraft/mods/[^/]+\.jar'
  - .minecraft/saves
```

推荐用这个小工具来调试正则表达式：https://tool.lu/regex/

需要注意的地方：

1. 请注意半角点`.` 的转义和正则本身的一些转义字符的影响
2. 路径分隔符统一用正斜线`/`表示。不要以`./`开头，也不要以`/`结尾
3. 加上@后，记得使用单/双引号包裹当前的值（不然会出现解析错误）
4. PHP服务端需要将所有单反斜线`\`替换成双反斜线`\\`(否则会出现解析错误)